(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"/0+H":function(e,t,n){"use strict";var a=n("hfKm"),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a(t,"__esModule",{value:!0});var o=r(n("q1tI")),i=n("lwAK");function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=void 0!==t&&t,a=e.hybrid,r=void 0!==a&&a,o=e.hasQuery;return n||r&&(void 0!==o&&o)}t.isInAmpMode=c,t.useAmp=function(){return c(o.default.useContext(i.AmpStateContext))}},"1jNS":function(e,t,n){"use strict";var a=n("bND0");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("q1tI")),o=(0,a(n("8/g6")).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}))),"EditRounded");t.default=o},"2PDY":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},"8Kt/":function(e,t,n){"use strict";var a=n("ttDY"),r=n("hfKm"),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};r(t,"__esModule",{value:!0});var i=o(n("q1tI")),c=o(n("Xuae")),s=n("lwAK"),l=n("FYa8"),u=n("/0+H");function p(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[i.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(i.default.createElement("meta",{name:"viewport",content:"width=device-width,minimum-scale=1,initial-scale=1"})),t}function d(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===i.default.Fragment?e.concat(i.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}t.defaultHead=p;var m=["name","httpEquiv","charSet","itemProp"];function h(e,t){return e.reduce((function(e,t){var n=i.default.Children.toArray(t.props.children);return e.concat(n)}),[]).reduce(d,[]).reverse().concat(p(t.inAmpMode)).filter(function(){var e=new a,t=new a,n=new a,r={};return function(o){var i=!0;if(o.key&&"number"!==typeof o.key&&o.key.indexOf("$")>0){var c=o.key.slice(o.key.indexOf("$")+1);e.has(c)?i=!1:e.add(c)}switch(o.type){case"title":case"base":t.has(o.type)?i=!1:t.add(o.type);break;case"meta":for(var s=0,l=m.length;s<l;s++){var u=m[s];if(o.props.hasOwnProperty(u))if("charSet"===u)n.has(u)?i=!1:n.add(u);else{var p=o.props[u],d=r[u]||new a;d.has(p)?i=!1:(d.add(p),r[u]=d)}}}return i}}()).reverse().map((function(e,t){var n=e.key||t;return i.default.cloneElement(e,{key:n})}))}var f=c.default();function b(e){var t=e.children;return i.default.createElement(s.AmpStateContext.Consumer,null,(function(e){return i.default.createElement(l.HeadManagerContext.Consumer,null,(function(n){return i.default.createElement(f,{reduceComponentsToState:h,handleStateChange:n,inAmpMode:u.isInAmpMode(e)},t)}))}))}b.rewind=f.rewind,t.default=b},"8dGm":function(e,t,n){"use strict";var a=n("bND0");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("q1tI")),o=(0,a(n("8/g6")).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Reply");t.default=o},CPHa:function(e,t,n){"use strict";var a=n("B4CS"),r=n("H8ru");e.exports=n("8vat")("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return a.def(r(this,"Set"),e=0===e?0:e,e)}},a)},FYa8:function(e,t,n){"use strict";var a=n("hfKm"),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};a(t,"__esModule",{value:!0});var o=r(n("q1tI"));t.HeadManagerContext=o.createContext(null)},GDVm:function(e,t,n){n("ER9p")("Set")},HiNr:function(e,t,n){"use strict";n.r(t);var a=n("ln6h"),r=n.n(a),o=n("9Jkg"),i=n.n(o),c=n("0iUn"),s=n("sLSF"),l=n("MI3g"),u=n("a7VT"),p=n("AT/M"),d=n("Tit0"),m=n("vYYK"),h=n("q1tI"),f=n.n(h),b=n("vDqi"),g=n.n(b),y=n("obyI"),v=n("/wFB"),O=n("u1ig"),j=n("bM/q"),w=n.n(j),x=n("SPKb"),k=f.a.createElement,S=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r))),Object(m.a)(Object(p.a)(n),"state",{load:"open",videoId:""}),Object(m.a)(Object(p.a)(n),"checkIfUrl",(function(e){var t=w()(e,{protocols:["http","https"],require_valid_protocol:!0,require_protocol:!0});return t||null})),Object(m.a)(Object(p.a)(n),"checkIfItYouTube",(function(e){return new URL(e).hostname.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"")})),Object(m.a)(Object(p.a)(n),"displayYoutube",(function(){var e=n.props,t=(e.url,e.height,n.state),a=t.load,r=t.videoId;if("youtube"===a)return k("div",{style:{marginTop:70}},k(O.a,{videoId:r,opts:{height:"500px",width:"100%",playerVars:{autoplay:0}},onReady:n._onReady}))})),Object(m.a)(Object(p.a)(n),"displayIframe",(function(){var e=n.props,t=e.height,a=e.top,r=e.site,o=n.state.load;return r&&"youtube"!==o?""===r.screen_path?k("iframe",{id:"frame",style:{borderRight:"10px solid gray",width:"100%",height:t||"70vh",marginTop:a||0},width:"300",height:"200",src:n.props.url,allow:"fullscreen"},k("p",null,"Your browser does not support iframes.")):k("img",{src:"//image.thum.io/get/iphoneX/noanimate/hidePopovers/auth/3228-www.tipestry.com/"+r.url,style:{width:"auto",height:"auto",marginTop:a||0}}):k("iframe",{id:"frame",style:{borderRight:"10px solid gray",width:"100%",height:t||"70vh",marginTop:a||0},width:"300",height:"200",src:n.props.url,onLoad:n.error,allow:"fullscreen"},k("p",null,"Your browser does not support iframes."))})),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e,t,n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e=this.props,t=e.url,e.screenshot,this.checkIfUrl(t)&&("youtube.com"==this.checkIfItYouTube(t)&&null!=this.getQuery("v",t)&&this.setState({load:"youtube",videoId:this.getQuery("v",t)}),"youtu.be"==this.checkIfItYouTube(t)&&this.setState({load:"youtube",videoId:t.substring(t.lastIndexOf("/")+1)}),"twitter.com"==this.checkIfItYouTube(t)&&("status"===(n=t.split("/"))[4]?this.setState({load:"tweet",videoId:n[n.length-1]}):4===n.length&&this.setState({load:"tweet",videoId:n[n.length-1]})));case 2:case"end":return a.stop()}}),null,this)}},{key:"getQuery",value:function(e,t){e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},{key:"_onReady",value:function(e){e.target.pauseVideo()}},{key:"render",value:function(){var e=this.props,t=(e.height,e.top,e.img,this.state),n=t.load,a=t.videoId;return k("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},"youtube"===n&&this.displayYoutube(),"open"===n&&this.displayIframe(),"twitter"===n&&k(x.a,{sourceType:"profile",screenName:a,options:{height:400}}),"tweet"===n&&k(x.b,{tweetId:a}))}}]),t}(h.Component),C=n("3ZzI"),T=n.n(C),I=n("SUMQ"),_=n("ZqOF"),A=n.n(_),R=n("6ZaM"),N=n.n(R),E=n("1OZW"),M=n.n(E),D=n("ANjH"),P=n("/MKj"),U=n("Rehh"),z=n("YFqc"),F=n.n(z),V=n("9NOM"),L=n("0iCA"),W=f.a.createElement,G=function(e){function t(e){var n;return Object(c.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e)),Object(m.a)(Object(p.a)(n),"handleChange",(function(e){return function(t){n.setState(Object(m.a)({},e,t.target.value))}})),n.recaptchaRef=f.a.createRef(),n.state={comment:"",token:null},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e})}},{key:"handleAddComment",value:function(){var e,t,n,a,o,c,s,l,u;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=this.props,t=e.data,n=e.token,a=e.getSiteTopic,o=e.handleUpdate,c=this.state.comment,s={comment_id:"",commentable_id:t.siteTopic[0].id,commentable_type:"AppTopic",content:c},!n){p.next=7;break}l={method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","x-auth-token":n},data:i()(s),url:y.a.api+"/commentReply/comment"},p.next=11;break;case 7:if(""!==this.recaptchaRef.current.getValue()){p.next=10;break}return p.abrupt("return");case 10:l={method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},data:i()(s),url:y.a.api+"/commentReply/comment/anonymous"};case 11:return p.prev=11,p.next=14,r.a.awrap(g()(l));case 14:(u=p.sent).data.error||(this.setState({comment:""}),a(u.data.content),o(u.data.content[0].comment)),p.next=20;break;case 18:p.prev=18,p.t0=p.catch(11);case 20:case"end":return p.stop()}}),null,this,[[11,18]])}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.comment,a=t.token;return W(f.a.Fragment,null,W("form",{className:e.container,noValidate:!0,autoComplete:"off"},W(A.a,{label:V.a.a1,multiline:!0,rows:"3",name:"comment",value:n,onChange:this.handleChange("comment"),className:e.textField,margin:"normal",variant:"outlined"}),!a&&W("div",{style:{margin:"0 8%"}},W(L.a,{ref:this.recaptchaRef,sitekey:"6LfC9q4UAAAAAMbyFnaZtaQyEOuiBKb1gI8QMZKx",onChange:this.onChange})),!a&&W(N.a,{variant:"subtitle1"},"You are currently not \xa0",W(F.a,{href:"/login"},W("a",null,V.a.y,".")),"\xa0Any comment made would be done Anonymously"),W(M.a,{variant:"outlined",onClick:this.handleAddComment.bind(this),color:"primary",className:e.button},V.a.w)))}}]),t}(f.a.Component);var Y=Object(P.b)((function(e){return{data:e.data}}),(function(e){return Object(D.b)({getSiteTopic:U.h},e)}))(Object(I.withStyles)((function(e){return{container:{margin:"5%",marginTop:-25},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"100%"},button:{margin:e.spacing.unit}}}))(G)),q=n("IPLq"),B=n.n(q),H=n("Ndn5"),Q=n.n(H),K=n("Ce3J"),J=n.n(K),$=n("qtdb"),Z=n.n($),X=n("u39b"),ee=n("1IiC"),te=n.n(ee),ne=n("MPUk"),ae=n.n(ne),re=n("iQD9"),oe=n.n(re),ie=n("wd/R"),ce=n.n(ie),se=n("nwgO"),le=n.n(se),ue=n("n65s"),pe=n.n(ue),de=n("5+5J"),me=n.n(de),he=n("6lsK"),fe=n.n(he),be=n("Ol6B"),ge=n.n(be),ye=f.a.createElement,ve=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r))),Object(m.a)(Object(p.a)(n),"state",{count:"",res:{error:!1,msg:"",content:{}}}),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e,t,n,a,o,i;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=this.props,t=e.commentObjId,n=e.votes,a=localStorage.getItem("token"),this.setState({count:"undefined"!==typeof n[0]?n[0].count:""}),!a){c.next=10;break}return o={method:"GET",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","x-auth-token":a},url:y.a.api+"/votes/comment/"+t},c.next=7,r.a.awrap(g()(o));case 7:0==(i=c.sent).data.error&&this.setState({res:i.data.content}),this.props.getToken(a);case 10:case"end":return c.stop()}}),null,this)}},{key:"handleVote",value:function(e){var t,n,a,o;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=this.props.commentObjId,!(n=localStorage.getItem("token"))){c.next=8;break}return a={method:"POST",data:i()({votes:e,commentObjId:t}),headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","x-auth-token":n},url:y.a.api+"/votes/comment"},c.next=6,r.a.awrap(g()(a));case 6:!1===(o=c.sent).data.error&&this.setState({res:o.data.content.reply,count:0===o.data.content.count?"":o.data.content.count});case 8:case"end":return c.stop()}}),null,this)}},{key:"thumbup",value:function(){var e=this.state.res,t=this.props.data;return"undefined"!==typeof e.userId&&e.userId===t.user.id&&1===e.votes?ye(me.a,{style:{color:"#1F7BD8",fontSize:20}}):ye(ge.a,{style:{fontSize:20}})}},{key:"thumbDown",value:function(){var e=this.state.res,t=this.props.data;return"undefined"!==typeof e.userId&&e.userId===t.user.id&&0===e.votes?ye(pe.a,{style:{color:"#1F7BD8",fontSize:20}}):ye(fe.a,{style:{fontSize:20}})}},{key:"render",value:function(){var e=this.props,t=e.num,n=e.iconspacing,a=this.state.count;return ye(f.a.Fragment,null,ye(le.a,{title:"Thumbs Up","aria-label":"Thumbs Up"},ye(te.a,{"aria-label":"Thumbs Up",className:n,onClick:this.handleVote.bind(this,1)},this.thumbup())),ye("p",{className:t},a),"\xa0\xa0",ye(le.a,{title:"Thumbs Down","aria-label":"Thumbs Down"},ye(te.a,{"aria-label":"Thumbs Down",className:n,onClick:this.handleVote.bind(this,0)},this.thumbDown())))}}]),t}(f.a.Component);var Oe=Object(P.b)((function(e){return{data:e.data}}),(function(e){return Object(D.b)({getToken:U.k},e)}))(Object(I.withStyles)((function(e){return{button:{margin:e.spacing.unit},actions:{display:"flex",borderTop:".5px solid gray"}}}))(ve)),je=n("0cs1"),we=n.n(je),xe=n("pPbJ"),ke=n.n(xe),Se=n("Wa2I"),Ce=n.n(Se),Te=n("kOwS"),Ie=n("0G56"),_e=n.n(Ie),Ae=n("Sk/v"),Re=n.n(Ae),Ne=n("SNP2"),Ee=n.n(Ne),Me=n("C+zi"),De=n.n(Me),Pe=n("MPIl"),Ue=n.n(Pe),ze=n("TSYQ"),Fe=n.n(ze),Ve=n("cUz1"),Le=n.n(Ve),We=n("oLwl"),Ge=n("nOHt"),Ye=n.n(Ge),qe=f.a.createElement;function Be(e){return qe(Ue.a,Object(Te.a)({direction:"up"},e))}var He=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o))),Object(m.a)(Object(p.a)(n),"state",{amount:"",error:"",msgOpen:!1,msg:""}),Object(m.a)(Object(p.a)(n),"handleMsgClose",(function(){n.setState({msgOpen:!0})})),Object(m.a)(Object(p.a)(n),"handleGift",(function(){var e,t,a,o,c,s,l,u,p,d,m;return r.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(e=n.state.amount,t=n.props,a=t.commentUserId,t.router,o=t.type,c=t.handleClose,s=t.topicObjId,l=t.commentId,u=t.getSiteTopic,!(p=localStorage.getItem("token"))){h.next=11;break}return d={method:"POST",data:i()({amount:e,coinType:o,userId:a,commentId:l,topicObjId:s}),headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","x-auth-token":p},url:y.a.api+"/crypto/comment/gift"},h.next=7,r.a.awrap(g()(d));case 7:(m=h.sent).data.error?n.setState({error:m.data.message,msgOpen:!0,msg:"Something went wrong..."}):(u([]),u(m.data.content),n.setState({error:"",msgOpen:!0,msg:"Successfully tipped post"})),Ye.a.reload(),c();case 11:case"end":return h.stop()}}))})),Object(m.a)(Object(p.a)(n),"handleChange",(function(e){return function(t){var a,r,o=n.props.currentCoin,i=Math.abs(Ce()(t.target.value));o>=i&&0!==i?n.setState((a={},Object(m.a)(a,e,i),Object(m.a)(a,"error",""),a)):n.setState((r={},Object(m.a)(r,e,i),Object(m.a)(r,"error","You have insuficient balance to handle this transaction"),r))}})),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,a=e.image,r=e.handleClose,o=e.currentCoin,i=this.state,c=i.error,s=i.amount,l=i.msgOpen,u=i.msg;return qe(_e.a,{open:n,TransitionComponent:Be,keepMounted:!0,onClose:function(){return r()},"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},qe(De.a,{id:"alert-dialog-slide-title"},qe("div",{style:{display:"flex"}},qe("img",{src:a,width:50,height:50}),qe("div",{style:{flexGrow:1}}),qe(N.a,{style:{margin:15}},"Balance: ",o))),qe(Ee.a,null,qe(A.a,{error:""!==c,id:"outlined-adornment-amount",className:Fe()(t.margin,t.textField),variant:"outlined",label:"Amount",type:"number",helperText:c,value:s,onChange:this.handleChange("amount"),InputProps:{startAdornment:qe(Le.a,{position:"start"},"$")}})),qe(Re.a,null,qe(M.a,{onClick:function(){return r()},color:"secondary"},"Maybe later"),qe(M.a,{disabled:""!==c,onClick:this.handleGift,color:"primary"},"Gift")),qe(We.a,{handleClose:this.handleMsgClose,open:l,message:u}))}}]),t}(f.a.Component);var Qe=Object(P.b)((function(e){return{data:e.data}}),(function(e){return Object(D.b)({getSiteTopic:U.h},e)}))(Object(Ge.withRouter)(Object(I.withStyles)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing.unit},textField:{flexBasis:200}}}))(He))),Ke=f.a.createElement,Je=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r))),Object(m.a)(Object(p.a)(n),"state",{arrow:!0,arrowRef:null,disablePortal:!1,flip:!0,open:!1,placement:"top",preventOverflow:"scrollParent",img:null,gift:!1,type:"",currentCoin:0}),Object(m.a)(Object(p.a)(n),"handleChange",(function(e){return function(t,a){n.setState(Object(m.a)({},e,a))}})),Object(m.a)(Object(p.a)(n),"handleChangeTarget",(function(e){return function(t){n.setState(Object(m.a)({},e,t.target.value))}})),Object(m.a)(Object(p.a)(n),"handleClickButton",(function(e){return function(t){var a=n.props.handleOpen;localStorage.getItem("token")?n.setState((function(t){return{open:!t.open,arrowRef:e}})):a()}})),Object(m.a)(Object(p.a)(n),"handleClose",(function(e,t){n.setState({open:!1})})),Object(m.a)(Object(p.a)(n),"handleGiftClose",(function(){n.setState({gift:!1})})),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleGift",value:function(e,t){var n=this.props,a=n.data,r=n.topicUserObjId;"undefined"!==typeof a.user.id&&(a.user._id!==r&&this.setState({img:"/static/tipcoins/"+e,type:t,gift:!0}),"bitcoin"===t?this.setState({currentCoin:"undefined"!==typeof a.user.btc[0]&&a.user.btc[0].balance}):"dogecoin"===t?this.setState({currentCoin:"undefined"!==typeof a.user.doge[0]&&a.user.doge[0].doge_balance}):"ethcoin"===t?this.setState({currentCoin:"undefined"!==typeof a.user.eth[0]&&a.user.eth[0].ethapibalance}):"ethtipc"===t?this.setState({currentCoin:"undefined"!==typeof a.user.eth[0]&&a.user.eth[0].tipcapibalance}):"ethtipcoin"===t?this.setState({currentCoin:"undefined"!==typeof a.user.eth[0]&&a.user.eth[0].tipapibalance}):"ethxrtcoin"===t&&this.setState({currentCoin:"undefined"!==typeof a.user.eth[0]&&a.user.eth[0].xrtapibalance}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.topicObjId,r=t.commentId,o=t.topicUserId,i=t.commentUserId,c=this.state,s=c.currentCoin,l=c.open,u=c.placement,p=c.disablePortal,d=c.flip,m=c.preventOverflow,h=c.arrow,f=c.arrowRef,b=c.gift,g=c.img,y=c.type,v=l?"Share":null;return Ke("div",{className:n.iconspacing},Ke(te.a,{buttonRef:function(t){e.anchorEl=t},"aria-label":"Share","aria-describedby":v,onClick:this.handleClickButton("arrow")},Ke("img",{src:"/static/icons/moneybag.svg",alt:"comments",width:"20",height:"20"})),Ke(we.a,{id:v,open:l,anchorEl:this.anchorEl,placement:u,disablePortal:p,className:n.popper,modifiers:{flip:{enabled:d},arrow:{enabled:h,element:f},preventOverflow:{enabled:"disabled"!==m,boundariesElement:"disabled"===m?"scrollParent":m}}},h?Ke("span",{className:n.arrow,ref:this.handleArrowRef}):null,Ke(ke.a,{className:n.paper},Ke("a",{className:n.lin,onClick:this.handleGift.bind(this,"bit.svg","bitcoin")},Ke("img",{src:"/static/tipcoins/bit.svg",width:"25",height:"25"})),Ke("a",{className:n.lin,onClick:this.handleGift.bind(this,"doge.svg","dogecoin")},Ke("img",{src:"/static/tipcoins/doge.svg",width:"25",height:"25"})),Ke("a",{className:n.lin,onClick:this.handleGift.bind(this,"eth.svg","ethcoin")},Ke("img",{src:"/static/tipcoins/eth.svg",width:"25",height:"25"})),Ke("a",{className:n.lin,onClick:this.handleGift.bind(this,"Tip-1.png","ethtipc")},Ke("img",{src:"/static/tipcoins/Tip-1.png",width:"25",height:"25"})),Ke("a",{className:n.lin,onClick:this.handleGift.bind(this,"Tip-2.png","ethtipcoin")},Ke("img",{src:"/static/tipcoins/Tip-2.png",width:"25",height:"25"})),Ke("a",{className:n.lin,onClick:this.handleGift.bind(this,"Tip-3.png","ethxrtcoin")},Ke("img",{src:"/static/tipcoins/Tip-3.png",width:"25",height:"25"})))),Ke(Qe,{open:b,image:g,type:y,topicObjId:a,commentId:r,currentCoin:s,commentUserId:i,topicUserId:o,handleClose:this.handleGiftClose}))}}]),t}(f.a.Component);var $e=Object(P.b)((function(e){return{data:e.data}}))(Object(I.withStyles)((function(e){var t,n;return{root:{},paper:{maxWidth:400,overflow:"auto",padding:10,borderRadius:18},iconspacing:(t={},Object(m.a)(t,e.breakpoints.only("xs"),{margin:"0 -3px"}),Object(m.a)(t,e.breakpoints.only("sm"),{margin:"0 4px"}),Object(m.a)(t,e.breakpoints.between("md","xl"),{margin:"0 10px"}),t),lin:{cursor:"pointer",margin:5},popper:{zIndex:1,'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.9em",width:"17em",height:"1em","&::before":{borderWidth:"0 1em 1em 1em",borderColor:"transparent transparent ".concat(e.palette.common.white," transparent")}},'&[x-placement*="top"] $arrow':(n={bottom:0,left:0,marginBottom:"-0.9em"},Object(m.a)(n,e.breakpoints.only("xs"),{width:"20"}),Object(m.a)(n,e.breakpoints.only("sm"),{width:"33em"}),Object(m.a)(n,e.breakpoints.between("md","xl"),{width:"36em"}),Object(m.a)(n,"height","1em"),Object(m.a)(n,"&::before",{borderWidth:"1em 1em 0 1em",borderColor:"".concat(e.palette.common.white," transparent transparent transparent")}),n),'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.9em",height:"3em",width:"1em","&::before":{borderWidth:"1em 1em 1em 0",borderColor:"transparent ".concat(e.palette.common.white," transparent transparent")}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.9em",height:"3em",width:"1em","&::before":{borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent ".concat(e.palette.common.white)}}},arrow:{position:"absolute",fontSize:7,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}},social:{margin:"20px 5px"}}}))(Je)),Ze=f.a.createElement,Xe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r))),Object(m.a)(Object(p.a)(n),"state",{btc:null,doge:null,eth:null,tipc:null,tip:null,xth:null}),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.gift;if("undefined"!==typeof t[0]){var n=0,a=0,r=0,o=0,i=0,c=0;t.map((function(t){"btc"===t.currency&&(n=Ce()(n)+Ce()(t.amount),e.setState({btc:n.toFixed(5)}))})),t.map((function(t){"doge"===t.currency&&(a=Ce()(a)+Ce()(t.amount),e.setState({doge:a.toFixed(5)}))})),t.map((function(t){"ethcoin"===t.currency&&(r=Ce()(r)+Ce()(t.amount),e.setState({eth:r.toFixed(5)}))})),t.map((function(t){"ethtipc"===t.currency&&(o=Ce()(o)+Ce()(t.amount),e.setState({tipc:o.toFixed(5)}))})),t.map((function(t){"ethtipcoin"===t.currency&&(i=Ce()(i)+Ce()(t.amount),e.setState({tip:i.toFixed(5)}))})),t.map((function(t){"ethxrtcoin"===t.currency&&(c=Ce()(c)+Ce()(t.amount),e.setState({xth:c.toFixed(5)}))}))}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.gift,a=this.state,r=a.btc,o=a.doge,i=a.eth,c=a.tipc,s=a.tip,l=a.xth;return"undefined"!==typeof n[0]?Ze(Z.a,{className:t.actions},r&&Ze(f.a.Fragment,null,Ze("img",{src:"/static/tipcoins/bit.svg",className:t.img}),Ze("p",{className:t.num},r)),o&&Ze(f.a.Fragment,null,Ze("img",{src:"/static/tipcoins/doge.svg",className:t.img}),Ze("p",{className:t.num},o)),i&&Ze(f.a.Fragment,null,Ze("img",{src:"/static/tipcoins/eth.svg",className:t.img}),Ze("p",{className:t.num},i)),c&&Ze(f.a.Fragment,null,Ze("img",{src:"/static/tipcoins/Tip-1.png",className:t.img}),Ze("p",{className:t.num},this.state.tipc)),s&&Ze(f.a.Fragment,null,Ze("img",{src:"/static/tipcoins/Tip-2.png",className:t.img}),Ze("p",{className:t.num},s)),l&&Ze(f.a.Fragment,null,Ze("img",{src:"/static/tipcoins/Tip-3.png",className:t.img}),Ze("p",{className:t.num},l))):null}}]),t}(f.a.Component);var et=Object(P.b)((function(e){return{data:e.data}}))(Object(I.withStyles)((function(e){var t,n;return n={button:{margin:e.spacing.unit},actions:{display:"flex",flexGrow:"wrap",borderTop:".5px solid gray"},num:Object(m.a)({fontSize:15,fontWeight:"500",padding:0,color:"#403d3d",marginLeft:"-7px"},e.breakpoints.up("md"),{marginLeft:"-18px"}),img:{width:15,height:15,margin:3,marginLeft:"1%"}},Object(m.a)(n,"num",{fontSize:12,marginLeft:-3}),Object(m.a)(n,"iconspacing",(t={},Object(m.a)(t,e.breakpoints.only("xs"),{margin:"0 -3px"}),Object(m.a)(t,e.breakpoints.only("sm"),{margin:"0 4px"}),Object(m.a)(t,e.breakpoints.between("md","xl"),{margin:"0 10px"}),t)),n}))(Xe)),tt=n("8dGm"),nt=n.n(tt),at=n("1jNS"),rt=n.n(at),ot=n("uDd3"),it=n.n(ot),ct=n("sIYH"),st=n.n(ct),lt=n("x5mg"),ut=f.a.createElement,pt=function(e){function t(e){var n;return Object(c.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e)),Object(m.a)(Object(p.a)(n),"handleChange",(function(e){n.setState({reply:e.target.value})})),Object(m.a)(Object(p.a)(n),"handleClose",(function(){n.setState({open:!1})})),Object(m.a)(Object(p.a)(n),"handleReply",(function(){var e,t,a,o,c,s,l;return r.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e=n.state.reply,t=n.props,a=t.commentId,o=t.handleUpdateReply,t.commentObjId,!(c=localStorage.getItem("token"))){u.next=7;break}s={method:"POST",data:i()({commentId:a,content:e}),headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","x-auth-token":c},url:y.a.api+"/commentReply/reply"},u.next=11;break;case 7:if(""!==n.recaptchaRef.current.getValue()){u.next=10;break}return u.abrupt("return");case 10:s={method:"POST",data:i()({commentId:a,content:e}),headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},url:y.a.api+"/commentReply/reply/anonymous"};case 11:return u.next=13,r.a.awrap(g()(s));case 13:!1===(l=u.sent).data.error&&(n.setState({reply:""}),o(l.data.content.replies,l.data.content.total));case 15:case"end":return u.stop()}}))})),n.recaptchaRef=f.a.createRef(),n.state={open:!1,reply:"",token:null},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.username,a=this.state,r=a.reply,o=a.open,i=a.token;return ut("form",{className:t.container,noValidate:!0,autoComplete:"off"},ut(A.a,{id:"reply",label:ut("span",null,ut("span",{style:{color:"gray"}},"reply @"),ut("b",null,n)),value:r,style:{margin:8},onChange:this.handleChange,fullWidth:!0,rowsMax:3,margin:"normal",multiline:!0,color:"secondary"}),ut("br",null),ut("br",null),!i&&ut("div",{style:{margin:"0 8%"}},ut(L.a,{ref:this.recaptchaRef,sitekey:"6LfC9q4UAAAAAMbyFnaZtaQyEOuiBKb1gI8QMZKx",onChange:this.onChange})),ut(M.a,{color:"secondary",style:{marginTop:20},disabled:0===r.length,className:t.button,onClick:this.handleReply},"Save"),ut(lt.a,{open:o,handleClose:this.handleClose}))}}]),t}(f.a.Component),dt=Object(I.withStyles)((function(e){return{container:{display:"flex",alignItems:"flex-start",flexWrap:"wrap",marginLeft:60},button:{margin:e.spacing.unit}}}))(pt),mt=f.a.createElement,ht=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o))),Object(m.a)(Object(p.a)(n),"state",{edit:null,content:"",replyValues:[],replyTotal:0}),Object(m.a)(Object(p.a)(n),"componentDidMount",(function(){var e,t,a,o;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=n.props,t=e.totalReplies,a=e.commentId,!(t>0)){i.next=11;break}return i.prev=2,i.next=5,r.a.awrap(g.a.get(y.a.api+"/commentReply/reply/"+a+"/limit"));case 5:(o=i.sent).data.error||n.setState({replyTotal:o.data.content.total,replyValues:o.data.content.replies}),i.next=11;break;case 9:i.prev=9,i.t0=i.catch(2);case 11:case"end":return i.stop()}}),null,null,[[2,9]])})),Object(m.a)(Object(p.a)(n),"handleUpdateReply",(function(e,t){n.setState({replyValues:e,replyTotal:t})})),Object(m.a)(Object(p.a)(n),"handleReplyEdit",(function(){var e,t,a,o,c,s,l,u,p,d;return r.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e=n.props,t=e.commentId,a=e.commentObjId,o=e.handleUpdateReply,c=n.state,s=c.edit,l=c.content,!(u=localStorage.getItem("token"))){m.next=9;break}return p={method:"POST",data:i()({commentId:t,replyObjId:s,content:l}),headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","x-auth-token":u},url:y.a.api+"/commentReply/reply/edit"},m.next=7,r.a.awrap(g()(p));case 7:!1===(d=m.sent).data.error&&(o(d.data.content,a),n.setState({edit:null,content:""}));case 9:case"end":return m.stop()}}))})),Object(m.a)(Object(p.a)(n),"handleChange",(function(e){n.setState({content:e.target.value})})),Object(m.a)(Object(p.a)(n),"handleDeleteReply",(function(e){var t,a,o,c,s,l,u;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=n.props,a=t.commentId,o=t.commentObjId,c=t.handleUpdateReply,!(s=localStorage.getItem("token"))){p.next=8;break}return l={method:"POST",data:i()({commentId:a,replyObjId:e}),headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","x-auth-token":s},url:y.a.api+"/commentReply/reply/delete"},p.next=6,r.a.awrap(g()(l));case 6:!1===(u=p.sent).data.error&&c(u.data.content,o);case 8:case"end":return p.stop()}}))})),Object(m.a)(Object(p.a)(n),"handleLoadReply",(function(){var e,t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=n.props.commentId,!(n.state.replyTotal>0)){a.next=12;break}return a.prev=3,a.next=6,r.a.awrap(g.a.get(y.a.api+"/commentReply/reply/"+e+"/all"));case 6:(t=a.sent).data.error||n.setState({replyTotal:t.data.content.total,replyValues:t.data.content.replies}),a.next=12;break;case 10:a.prev=10,a.t0=a.catch(3);case 12:case"end":return a.stop()}}),null,null,[[3,10]])})),Object(m.a)(Object(p.a)(n),"displayLoadMoreButton",(function(){var e=n.state;if(e.replyTotal!==e.replyValues.length)return mt("div",{style:{display:"flex",backgroundColor:"#fafafa"}},mt("div",{style:{flexGrow:1}}),mt("div",{style:{backgroundColor:"white",padding:"2px 20px"}},mt(N.a,{onClick:n.handleLoadReply,style:{color:"#78afe8",fontSize:12,cursor:"pointer"}},"Load All")))})),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"identifyLinks",value:function(e){return ReactHtmlParser(e.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a style='text-decoration: none;' href='$1'> $1 </a>"))}},{key:"enableEdit",value:function(e,t){this.setState({edit:e,content:t})}},{key:"displayReplyForm",value:function(){var e=this.props,t=e.reply,n=e.commentObjId,a=e.commentId,r=e.username;if(t===n)return mt(dt,{commentObjId:n,commentId:a,username:r,handleUpdateReply:this.handleUpdateReply})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.data,r=this.state,o=r.edit,i=r.content,c=r.replyValues,s=r.topicObjId;return console.log("PPPPPPPPP",c),mt("div",{style:{backgroundColor:"#fafafa"}},this.displayReplyForm(),c.map((function(t,r){return mt(B.a,{className:n.semicard,key:r},mt(Q.a,{classes:{title:n.time,subheader:n.time},avatar:t.user_id?mt(F.a,{href:"/profile/"+t.user[0]._id+"/@"+t.user[0].username},mt("a",{style:{textDecoration:"none"}},mt(X.a,{size:"xs",borderColor:"black",borderWidth:1,name:t.user[0].username,url:""!==t.user[0].profileimage&&t.user[0].profileimage?y.a.profileimage+t.user[0].profileimage:null}))):mt(X.a,{size:"xs",borderColor:"black",borderWidth:1,name:"Anon",url:null}),titleTypographyProps:{fontSize:12},style:{padding:"8px 25px"},action:mt(Z.a,{className:n.actions,disableActionSpacing:!0},mt("div",{style:{flexGrow:1}}),t.user_id&&a.user._id===t.user[0]._id&&mt(te.a,{"aria-label":"Thumbs Up",onClick:e.enableEdit.bind(e,t._id,t.content),className:n.iconspacing},mt(rt.a,{style:{fontSize:14}})),1===a.user.is_admin&&mt(te.a,{"aria-label":"delete",onClick:e.handleDeleteReply.bind(e,t._id),className:n.iconspacing},mt(it.a,{style:{fontSize:14}}))),title:t.user_id?mt(F.a,{href:"/profile/"+t.user[0]._id+"/@"+t.user[0].username},mt("a",{style:{color:"#1F7BD8",textDecoration:"none"}},mt("strong",{style:{color:"gray"}},"@"),t.user[0].username)):mt(N.a,null,"Anonymous"),subheader:mt("p",{style:{fontSize:10,margin:0}},ce()(t.created_at).locale(V.a.locale).fromNow())}),mt(J.a,{style:{paddingTop:0,paddingBottom:0,paddingLeft:25,paddingRight:25}},o&&o===t._id?mt("form",{className:n.container,noValidate:!0,autoComplete:"off"},mt(A.a,{label:mt("span",{style:{fontSize:12}},"Edit Reply"),style:{margin:8,marginTop:-5,fontSize:12},onChange:e.handleChange,fullWidth:!0,value:i,margin:"normal",multiline:!0}),mt(M.a,{color:"secondary",style:Object(m.a)({marginTop:27},"marginTop",-5),className:n.button,onClick:e.handleReplyEdit},"Save")):mt(N.a,{component:"p",style:{fontSize:15,fontWeight:"lighter"}},mt(st.a,{tagName:"p"},t.content.split("\n").map((function(e,t){return mt("span",{key:t},e,mt("br",null))}))))),mt(Z.a,null,mt(Oe,{commentObjId:t._id,votes:t.votesCount}),t.user_id&&mt($e,{topicObjId:s,commentId:t.id,commentUserId:t.user_id&&t.user[0]._id})),"undefined"!==typeof t.gifts&&mt(et,{gift:t.gifts}))})),this.displayLoadMoreButton())}}]),t}(f.a.Component);var ft=Object(P.b)((function(e){return{data:e.data}}))(Object(I.withStyles)((function(e){return{semicard:{marginLeft:"10%",marginTop:5,boxShadow:"1px 4px 0px -4px",borderRadius:5},media:{height:0,paddingTop:"56.25%"},time:{fontSize:12,margin:"0px 1"},actions:{display:"flex",padding:"0px 25px"},badge:{top:0,right:-19,width:27,height:27,border:"2px solid ".concat("light"===e.palette.type?e.palette.grey[200]:e.palette.grey[900])},iconspacing:Object(m.a)({margin:"0 3%"},e.breakpoints.down("xs"),{margin:"0 1%"})}}))(ht)),bt=f.a.createElement,gt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o))),Object(m.a)(Object(p.a)(n),"state",{edit:null,content:"",reply:null,open:!1}),Object(m.a)(Object(p.a)(n),"handleNotLoggedIn",(function(){n.setState((function(e){return{open:!e.open}}))})),Object(m.a)(Object(p.a)(n),"handleCommentEdit",(function(){var e,t,a,o,c,s,l;return r.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e=n.state,t=e.edit,a=e.content,o=n.props.getSiteTopic,!(c=localStorage.getItem("token"))){u.next=9;break}return s={method:"POST",data:i()({commentObjId:t,content:a}),headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","x-auth-token":c},url:y.a.api+"/commentReply/edit"},u.next=7,r.a.awrap(g()(s));case 7:!1===(l=u.sent).data.error&&(o(l.data.content),n.setState({edit:null,content:""}));case 9:case"end":return u.stop()}}))})),Object(m.a)(Object(p.a)(n),"handleChange",(function(e){n.setState({content:e.target.value})})),Object(m.a)(Object(p.a)(n),"handleUpdateReply",(function(e,t){n.setState({replyShow:t,replyValues:e})})),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleEdit",value:function(e,t){e===this.state.edit?this.setState({edit:null,content:""}):this.setState({edit:e,content:t})}},{key:"handleCommentDelete",value:function(e){var t,n,a,o;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=this.props.getSiteTopic,!(n=localStorage.getItem("token"))){c.next=8;break}return a={method:"POST",data:i()({commentObjId:e}),headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","x-auth-token":n},url:y.a.api+"/commentReply/delete"},c.next=6,r.a.awrap(g()(a));case 6:!1===(o=c.sent).data.error&&(t(o.data.content),this.setState({edit:null,content:""}));case 8:case"end":return c.stop()}}),null,this)}},{key:"handleDisplayReplyCompose",value:function(e){e===this.state.reply?this.setState({reply:null}):this.setState({reply:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.data,r=this.state,o=(r.comments,r.edit),i=r.content,c=r.replyValues,s=r.reply,l=r.open;return bt(f.a.Fragment,null,a.siteTopic[0].comment.map((function(t,r){return bt(B.a,{className:n.card,key:r},bt(Q.a,{style:{paddingTop:5,paddingBottom:7},avatar:t.user_id?bt(F.a,{href:"/profile/"+t.commentUser[0]._id+"/@"+t.commentUser[0].username},bt("a",{style:{textDecoration:"none"}},bt(X.a,{borderColor:"black",borderWidth:2,name:t.commentUser[0].username,url:""!==t.commentUser[0].profileimage&&t.commentUser[0].profileimage?y.a.profileimage+t.commentUser[0].profileimage:null}))):bt(X.a,{borderColor:"black",borderWidth:2,name:"ano",url:null}),title:t.user_id?bt(F.a,{href:"/profile/"+t.commentUser[0]._id+"/@"+t.commentUser[0].username},bt("a",{style:{color:"#1F7BD8",textDecoration:"none"}},bt("strong",{style:{color:"gray"}},"@"),t.commentUser[0].username)):bt(N.a,null," Anonymous"),subheader:bt("p",{style:{fontSize:10,margin:0}},ce()(t.created_at).locale(V.a.locale).fromNow())}),bt(J.a,{style:{padding:"0px 25px"}},o&&o===t._id?bt("form",{className:n.container,noValidate:!0,autoComplete:"off"},bt(A.a,{label:"Edit comment",style:{margin:8,marginTop:-5},onChange:e.handleChange,fullWidth:!0,value:i,margin:"normal",multiline:!0,onSubmit:e.handleCommentEdit}),bt(M.a,{color:"secondary",style:Object(m.a)({marginTop:27},"marginTop",-5),className:n.button,onClick:e.handleCommentEdit},"Save")):bt(N.a,{component:"p",style:{fontSize:15,fontWeight:"lighter",whiteSpace:"pre-line"}},bt(st.a,{tagName:"p"},t.content.split("\n").map((function(e,t){return bt("span",{key:t},e,bt("br",null))}))))),bt(Z.a,{className:n.actions,disableActionSpacing:!0},bt(Oe,{commentObjId:t._id,votes:t.votesCount}),bt(te.a,{"aria-label":"Reply",onClick:e.handleDisplayReplyCompose.bind(e,t._id)},bt(nt.a,{style:{fontSize:20}})),"\xa0\xa0",t.user_id&&a.user._id===t.commentUser[0]._id&&bt(te.a,{"aria-label":"Edit",onClick:e.handleEdit.bind(e,t._id,t.content)},bt(ae.a,{style:{fontSize:20}})),t.user_id&&a.user._id===t.commentUser[0]._id||1===a.user.is_admin&&bt(te.a,{"aria-label":"delete",onClick:e.handleCommentDelete.bind(e,t._id)},bt(oe.a,{style:{fontSize:20}})),"undefined"!==typeof t.replyCount[0]&&bt(N.a,{style:{fontSize:11}},"Replies \xa0","undefined"!==typeof t.replyCount[0]?t.replyCount[0].count:""),"\xa0\xa0","undefined"!==typeof a.user.id&&t.user_id&&t.commentUser[0].id!==a.user.id&&bt($e,{topicObjId:a.siteTopic[0]._id,commentId:t.id,handleOpen:e.handleNotLoggedIn,commentUserId:t.user_id&&t.commentUser[0].id})),bt(et,{gift:t.gifts}),bt(ft,{replyValues:c,reply:s,username:t.user_id?t.commentUser[0].username:"",commentId:t.id,handleReply:e.handleReply,totalReplies:"undefined"!==typeof t.replyCount[0]?t.replyCount[0].count:0,commentObjId:t._id,handleUpdateReply:e.handleUpdateReply,topicObjId:a.siteTopic[0]._id}))})),bt(lt.a,{open:l,handleClose:this.handleNotLoggedIn}))}}]),t}(f.a.Component);var yt=Object(P.b)((function(e){return{data:e.data}}),(function(e){return Object(D.b)({getSiteTopic:U.h},e)}))(Object(I.withStyles)((function(e){var t;return{card:(t={marginTop:5,boxShadow:"1px -1px 8px -4px",borderRadius:10},Object(m.a)(t,e.breakpoints.only("xs"),{maxWidth:400}),Object(m.a)(t,e.breakpoints.only("sm"),{maxWidth:700}),t),actions:{display:"flex",padding:"0px 25px"},textLink:{cursor:"pointer"}}}))(gt)),vt=f.a.createElement,Ot=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return vt("div",{style:{margin:"0 5%"}},vt("div",{style:{height:500,width:"100%"}},vt("div",{style:{height:450,width:"100%",overflow:"auto"}},vt(yt,null))))}}]),t}(h.Component),jt=n("fWIC"),wt=n.n(jt),xt=n("2zRM"),kt=n("FSvF"),St=f.a.createElement,Ct=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r))),Object(m.a)(Object(p.a)(n),"handleTag",(function(){console.log("click link")})),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data,a=e.token;return"undefined"!==typeof n.siteTopic[0]?St(B.a,{className:t.card},St(Q.a,{avatar:n.siteTopic[0].user_id?St(F.a,{href:"/profile/"+n.siteTopic[0].user[0]._id+"/@"+n.siteTopic[0].user[0].username},St("a",{style:{textDecoration:"none"}},St(X.a,{borderColor:"black",borderWidth:2,name:n.siteTopic[0].user[0].username,url:""!==n.siteTopic[0].user[0].profileimage&&n.siteTopic[0].user[0].profileimage?y.a.profileimage+n.siteTopic[0].user[0].profileimage:null}))):St(X.a,{name:"Anonymous",url:null}),title:n.siteTopic[0].user_id?St(F.a,{href:"/profile/"+n.siteTopic[0].user[0]._id+"/@"+n.siteTopic[0].user[0].username},St("a",{style:{color:"#1F7BD8",textDecoration:"none"}},St("strong",{style:{color:"gray"}},"@"),"undefined"!==typeof n.siteTopic[0].user[0]?"".concat(n.siteTopic[0].user[0].username):"@No name")):St(N.a,null,"Anonymous"),subheader:St("p",{style:{fontSize:10,margin:0}},ce()(n.siteTopic[0].created_at).locale(V.a.locale).fromNow())}),St(J.a,{style:{padding:"0px 25px"}},St(N.a,{component:"p"},"undefined"!==typeof n.siteTopic[0].message&&n.siteTopic[0].message&&St(st.a,{tagName:"span"},n.siteTopic[0].message.split("\n").map((function(e,t){return St("span",{key:t},e,St("br",null))}))),St(kt.a,{tags:n.siteTopic[0].tags,handleTag:this.handleTag}))),St(xt.a,{title:n.siteTopic[0].title,views:"undefined"!==typeof n.siteTopic[0].views?n.siteTopic[0].views.length:0,gift:n.siteTopic[0].gift.length,votes:n.siteTopic[0].votes,comment:n.siteTopic[0].comment.length,topicId:n.siteTopic[0].id,token:a,topicUserId:n.siteTopic[0].user_id?n.siteTopic[0].user[0].id:null,topicObjId:n.siteTopic[0]._id,link:encodeURI("/topics/"+n.siteTopic[0]._id+"/"+n.siteTopic[0].title.replace(/[.*+?^$/{}()|[\]\\]/g,"-"))}),St(et,{gift:n.siteTopic[0].gift})):null}}]),t}(f.a.Component);var Tt=Object(P.b)((function(e){return{data:e.data}}))(Object(I.withStyles)((function(e){return{card:{margin:"2px 5%",boxShadow:"0px 0px 0px 0px",backgroundColor:"#fafafa"},actions:{display:"flex",padding:"0px 25px"},expand:Object(m.a)({transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),marginRight:"2%"},e.breakpoints.up("sm"),{marginRight:-8}),expandOpen:{transform:"rotate(180deg)"},badge:{top:0,right:-19,width:27,height:27,border:"2px solid ".concat("light"===e.palette.type?e.palette.grey[200]:e.palette.grey[900])},iconspacing:Object(m.a)({margin:"0 3%"},e.breakpoints.down("xs"),{margin:"0 1%"}),avatar:{backgroundColor:wt.a[500]},chip:{margin:1,height:20},chipAvater:{height:20,width:20}}}))(Ct)),It=f.a.createElement,_t=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.token,n=e.data;return It("div",{style:{marginTop:80,height:"90vh"}},It(N.a,{variant:"title",style:{textAlign:"center"}},V.a.v),"undefined"!==typeof n.siteTopic[0]&&It(N.a,{style:{textAlign:"center"}},It("a",{target:"_blank",href:n.siteTopic[0].sites[0].url,style:{marginLeft:"5%",marginRight:"5%"}},n.siteTopic[0].sites[0].url.length>50?n.siteTopic[0].sites[0].url.substr(0,40)+"...":n.siteTopic[0].sites[0].url)),It(Tt,null),"undefined"!==typeof n.siteTopic[0]&&n.siteTopic[0].comment.length>0?It(Ot,{token:t}):It(N.a,{variant:"subtitle2",style:{textAlign:"left",margin:"5%"}},V.a.t," ",It("a",{style:{color:"#1F7BD8"}},"0")," ",V.a.u),It(Y,{token:t}))}}]),t}(h.Component);var At=Object(P.b)((function(e){return{data:e.data}}))(_t),Rt=n("Eg6Q"),Nt=n("cgWl"),Et=f.a.createElement,Mt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r))),Object(m.a)(Object(p.a)(n),"state",{token:null,drawer:!1,stopScroll:!1}),Object(m.a)(Object(p.a)(n),"handleDrawerOpen",(function(){n.setState({drawer:!0})})),Object(m.a)(Object(p.a)(n),"handleDrawerClose",(function(){n.setState({drawer:!1})})),Object(m.a)(Object(p.a)(n),"trackScrolling",(function(e){return window.scrollY>240?(n.setState({stopScroll:!0}),!1):(n.setState({stopScroll:!1}),!1)})),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){removeEventListener("scroll",this.trackScrolling)}},{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e}),addEventListener("scroll",this.trackScrolling)}},{key:"render",value:function(){var e=this.state,t=e.token,n=e.stopScroll,a=e.drawer,r=this.props.data;return Et("div",null,Et(Rt.a,{drawer:a,handleDrawerOpen:this.handleDrawerOpen,handleDrawerClose:this.handleDrawerClose}),Et(Nt.a,{drawer:a,overlay:!1,stopScroll:n,handleDrawerOpen:this.handleDrawerOpen,handleDrawerClose:this.handleDrawerClose},Et(T.a,{container:!0},Et(T.a,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6},Et(N.a,{variant:"h6",style:{margin:5,marginTop:80,textAlign:"center",color:"black"}},"undefined"!==typeof r.siteTopic[0]&&r.siteTopic[0].title),Et(S,{url:"undefined"!==typeof r.siteTopic[0]&&r.siteTopic[0].sites[0].url,img:"undefined"!==typeof r.siteTopic[0]&&r.siteTopic[0].screenshot,height:"85vh",top:0,site:"undefined"!==typeof r.siteTopic[0]&&r.siteTopic[0].sites[0]})),Et(T.a,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6},Et(At,{token:t})))))}}]),t}(h.Component);var Dt=Object(P.b)((function(e){return{data:e.data}}))(Mt),Pt=n("8Kt/"),Ut=n.n(Pt),zt=f.a.createElement,Ft=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o))),Object(m.a)(Object(p.a)(n),"state",{loading:!0}),Object(m.a)(Object(p.a)(n),"recordViews",(function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={method:"POST",data:i()({topicObjId:e[0]._id}),headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},url:y.a.api+"/topic/views"},n.next=3,r.a.awrap(g()(t));case 3:case"end":return n.stop()}}))})),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e,t,n,a,o,c,s,l;return r.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e=this.props,t=e.dataTopic,n=e.getSiteTopic,a=e.getUser,o=localStorage.getItem("token"),c=sessionStorage.getItem("user"),u.prev=3,!o){u.next=15;break}if(c){u.next=14;break}return s={method:"GET",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*","x-auth-token":o},url:y.a.api+"/users/me"},u.next=9,r.a.awrap(g()(s));case 9:l=u.sent,a(l.data[0]),sessionStorage.setItem("user",i()(l.data[0])),u.next=15;break;case 14:a(JSON.parse(c));case 15:this.recordViews(JSON.parse(t)),t&&(n(JSON.parse(t)),this.setState({loading:!1})),u.next=22;break;case 19:u.prev=19,u.t0=u.catch(3),u.t0.response.data.error&&(localStorage.removeItem("token"),Ye.a.push("/login?sE=true"));case 22:case"end":return u.stop()}}),null,this,[[3,19]])}},{key:"render",value:function(){var e=this.state.loading,t=this.props.dataTopic,n=JSON.parse(t);return zt("div",null,zt(Ut.a,null,zt("title",null,"Tipestry | ",n[0].title),zt("meta",{charSet:"UTF-8"}),zt("meta",{name:"description",content:n[0].title})),zt(e?v.a:Dt,null))}}],[{key:"getInitialProps",value:function(e){var t,n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.query,o.next=3,r.a.awrap(g.a.get(y.a.api+"/topic/"+t.topicObjId));case 3:return n=o.sent,a=i()(n.data.content),o.abrupt("return",{dataTopic:a});case 6:case"end":return o.stop()}}))}}]),t}(h.Component);t.default=Object(P.b)((function(e){return{data:e.data}}),(function(e){return Object(D.b)({getUser:U.n,getSiteTopic:U.h},e)}))(Ft)},IrWQ:function(e,t,n){var a=n("0T/a");a(a.P+a.R,"Set",{toJSON:n("A0wl")("Set")})},J8pK:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/topic",function(){return n("HiNr")}])},MPUk:function(e,t,n){"use strict";var a=n("bND0");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("q1tI")),o=(0,a(n("8/g6")).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Edit");t.default=o},OuPC:function(e,t,n){n("AS96")("Set")},PQJW:function(e,t,n){var a=n("d04V"),r=n("yLu3");e.exports=function(e){if(r(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return a(e)}},TbGu:function(e,t,n){var a=n("fGSI"),r=n("PQJW"),o=n("2PDY");e.exports=function(e){return a(e)||r(e)||o()}},"V/f9":function(e,t,n){n("k8Q4"),n("YQlv"),e.exports=n("p9MR").Array.from},Xuae:function(e,t,n){"use strict";var a=n("/HRN"),r=n("ZDA2"),o=n("/+P4"),i=n("K47E"),c=n("WaGi"),s=n("N9n2"),l=n("TbGu"),u=n("ttDY");n("hfKm")(t,"__esModule",{value:!0});var p=n("q1tI"),d=!1;t.default=function(){var e,t=new u;function n(n){e=n.props.reduceComponentsToState(l(t),n.props),n.props.handleStateChange&&n.props.handleStateChange(e)}return function(l){function u(e){var c;return a(this,u),c=r(this,o(u).call(this,e)),d&&(t.add(i(c)),n(i(c))),c}return s(u,l),c(u,null,[{key:"rewind",value:function(){var n=e;return e=void 0,t.clear(),n}}]),c(u,[{key:"componentDidMount",value:function(){t.add(this),n(this)}},{key:"componentDidUpdate",value:function(){n(this)}},{key:"componentWillUnmount",value:function(){t.delete(this),n(this)}},{key:"render",value:function(){return null}}]),u}(p.Component)}},YQlv:function(e,t,n){"use strict";var a=n("vCXk"),r=n("0T/a"),o=n("AYVP"),i=n("nJOo"),c=n("widk"),s=n("pasi"),l=n("s+zB"),u=n("8Vlj");r(r.S+r.F*!n("Q2zc")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,r,p,d=o(e),m="function"==typeof this?this:Array,h=arguments.length,f=h>1?arguments[1]:void 0,b=void 0!==f,g=0,y=u(d);if(b&&(f=a(f,h>2?arguments[2]:void 0,2)),void 0==y||m==Array&&c(y))for(n=new m(t=s(d.length));t>g;g++)l(n,g,b?f(d[g],g):d[g]);else for(p=y.call(d),n=new m;!(r=p.next()).done;g++)l(n,g,b?i(p,f,[r.value,g],!0):r.value);return n.length=g,n}})},d04V:function(e,t,n){e.exports=n("V/f9")},fGSI:function(e,t,n){var a=n("p0XB");e.exports=function(e){if(a(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},iQD9:function(e,t,n){"use strict";var a=n("bND0");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("q1tI")),o=(0,a(n("8/g6")).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.default.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),"RemoveCircleOutline");t.default=o},lwAK:function(e,t,n){"use strict";var a=n("hfKm"),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};a(t,"__esModule",{value:!0});var o=r(n("q1tI"));t.AmpStateContext=o.createContext({})},ttDY:function(e,t,n){e.exports=n("vjmV")},uDd3:function(e,t,n){"use strict";var a=n("bND0");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("q1tI")),o=(0,a(n("8/g6")).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"})),"RemoveCircle");t.default=o},vjmV:function(e,t,n){n("Ev2V"),n("k8Q4"),n("tCzM"),n("CPHa"),n("IrWQ"),n("GDVm"),n("OuPC"),e.exports=n("p9MR").Set}},[["J8pK",1,2,0,3,4,5,6,7,8,9,10,11,12,13,14,15,17]]]);